# ğŸµ èŠ‚æ‹å™¨åŠŸèƒ½æœ€ç»ˆæ€»ç»“

## å®Œæˆæ—¶é—´
2024-01-20

## ğŸ¯ åŠŸèƒ½æ¦‚è§ˆ

Saison èŠ‚æ‹å™¨ç°åœ¨æ˜¯ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„ä¸“ä¸šçº§å·¥å…·ï¼Œå…·å¤‡ä»¥ä¸‹æ ¸å¿ƒåŠŸèƒ½ï¼š

### âœ¨ æ ¸å¿ƒåŠŸèƒ½
1. **ç²¾ç¡®èŠ‚æ‹æ§åˆ¶** - 30-240 BPMï¼Œæ¯«ç§’çº§ç²¾åº¦
2. **å¤šç§æ‹å·æ”¯æŒ** - 2/4, 3/4, 4/4, 6/4
3. **å¯è§†åŒ–æŒ‡ç¤ºå™¨** - åŠ¨æ€åœ†å½¢èŠ‚æ‹æ˜¾ç¤ºï¼Œå¸¦è„‰å†²åŠ¨ç”»
4. **éŸ³æ•ˆç³»ç»Ÿ** - é‡éŸ³å’Œæ™®é€šèŠ‚æ‹éŸ³æ•ˆ
5. **è§¦è§‰åé¦ˆ** - æ™ºèƒ½æŒ¯åŠ¨åé¦ˆ
6. **Tap Tempo** - æ™ºèƒ½èŠ‚å¥æ£€æµ‹
7. **é€Ÿåº¦é¢„è®¾** - 6 ç§ç»å…¸éŸ³ä¹é€Ÿåº¦
8. **é¢„è®¾ç®¡ç†** - ä¿å­˜å’ŒåŠ è½½è‡ªå®šä¹‰è®¾ç½®
9. **è‡ªåŠ¨ä¿å­˜** - è®°ä½æœ€åä½¿ç”¨çš„è®¾ç½®

## ğŸ“± ç”¨æˆ·ç•Œé¢

### ä¸»ç•Œé¢
- **å¯è§†åŒ–å™¨** - 240dp åœ†å½¢èŠ‚æ‹æŒ‡ç¤ºå™¨
  - è¿›åº¦ç¯æ˜¾ç¤ºå½“å‰èŠ‚æ‹è¿›åº¦
  - èŠ‚æ‹ç‚¹æŒ‡ç¤ºå™¨ï¼ˆé«˜äº®å½“å‰æ‹å’Œç¬¬ä¸€æ‹ï¼‰
  - è„‰å†²åŠ¨ç”»æ•ˆæœ
  - é™æ€/åŠ¨æ€çŠ¶æ€åˆ‡æ¢

- **BPM æ˜¾ç¤º** - 72sp å¤§å­—ä½“æ˜¾ç¤º
  - ä¸»è‰²å®¹å™¨å¡ç‰‡
  - æ¸…æ™°æ˜“è¯»

- **é€Ÿåº¦é¢„è®¾** - ä¸¤è¡Œ FilterChip
  - Largo (60) / Adagio (72) / Andante (92)
  - Moderato (108) / Allegro (132) / Presto (168)
  - å¿«é€Ÿé€‰æ‹©å¸¸ç”¨é€Ÿåº¦

- **ç²¾ç¡®è°ƒèŠ‚**
  - æ»‘å—ï¼š30-240 BPM
  - æŒ‰é’®ï¼šÂ±1 BPM å¾®è°ƒ
  - å®æ—¶æ›´æ–°

- **Tap Tempo** - å…¨å®½æŒ‰é’®
  - æ˜¾ç¤ºç‚¹å‡»è®¡æ•°ï¼ˆx/4ï¼‰
  - è§¦è§‰åé¦ˆ
  - è‡ªåŠ¨è®¡ç®— BPM

- **æ§åˆ¶æŒ‰é’®**
  - æ’­æ”¾/æš‚åœï¼ˆä¸»æŒ‰é’®ï¼‰
  - åœæ­¢ï¼ˆæ’­æ”¾æ—¶æ˜¾ç¤ºï¼‰
  - 56dp é«˜åº¦ï¼Œå¤§å›¾æ ‡

- **å®æ—¶ä¿¡æ¯**ï¼ˆæ’­æ”¾æ—¶ï¼‰
  - æ‹å·æ˜¾ç¤º
  - å½“å‰æ‹é«˜äº®
  - æ€»èŠ‚æ‹è®¡æ•°

### é¡¶éƒ¨æ“ä½œæ 
- **é¢„è®¾æŒ‰é’®** - ä¹¦ç­¾å›¾æ ‡
  - æŸ¥çœ‹æ‰€æœ‰ä¿å­˜çš„é¢„è®¾
  - å¿«é€ŸåŠ è½½é¢„è®¾
  - åˆ é™¤é¢„è®¾

- **ä¿å­˜æŒ‰é’®** - ä¿å­˜å›¾æ ‡
  - ä¿å­˜å½“å‰è®¾ç½®ä¸ºé¢„è®¾
  - è‡ªå®šä¹‰é¢„è®¾åç§°

- **è®¾ç½®æŒ‰é’®** - é½¿è½®å›¾æ ‡
  - æ‹å·è®¾ç½®
  - éŸ³é‡æ§åˆ¶
  - é‡éŸ³å¼€å…³
  - æŒ¯åŠ¨å¼€å…³

## ğŸ”§ æŠ€æœ¯å®ç°

### æ¶æ„è®¾è®¡
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         MetronomeScreen             â”‚
â”‚  (UI Layer - Jetpack Compose)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      MetronomeViewModel             â”‚
â”‚  (Business Logic - StateFlow)       â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚                              â”‚
       â–¼                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Sound Manager    â”‚    â”‚ Haptic Manager       â”‚
â”‚ (Audio)          â”‚    â”‚ (Vibration)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                              â”‚
       â–¼                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      MetronomePreferencesManager             â”‚
â”‚      (DataStore - Persistence)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ•°æ®æµ
1. **ç”¨æˆ·è¾“å…¥** â†’ UI äº‹ä»¶
2. **ViewModel** â†’ çŠ¶æ€æ›´æ–°
3. **StateFlow** â†’ UI é‡ç»„
4. **DataStore** â†’ æŒä¹…åŒ–

### å…³é”®æŠ€æœ¯

#### 1. ç²¾ç¡®è®¡æ—¶
```kotlin
while (isPlaying) {
    val intervalMs = (60000 / bpm).toLong()
    playBeatSound()
    updateBeat()
    delay(intervalMs)  // Coroutines ç²¾ç¡®å»¶è¿Ÿ
}
```

#### 2. Tap Tempo ç®—æ³•
```kotlin
// è®°å½•ç‚¹å‡»æ—¶é—´
tapTimes.add(currentTime)

// è®¡ç®—å¹³å‡é—´éš”
val avgInterval = intervals.average()

// è½¬æ¢ä¸º BPM
val bpm = (60000 / avgInterval).toInt()
```

#### 3. å¯è§†åŒ–åŠ¨ç”»
```kotlin
// æ— é™å¾ªç¯åŠ¨ç”»
val infiniteTransition = rememberInfiniteTransition()
val beatProgress by infiniteTransition.animateFloat(
    initialValue = 0f,
    targetValue = 1f,
    animationSpec = infiniteRepeatable(
        animation = tween(beatInterval),
        repeatMode = RepeatMode.Restart
    )
)
```

#### 4. é¢„è®¾ç®¡ç†
```kotlin
// DataStore æŒä¹…åŒ–
dataStore.edit { preferences ->
    preferences[SAVED_PRESETS] = Json.encodeToString(presets)
}

// Flow å“åº”å¼è¯»å–
val savedPresets: Flow<List<MetronomePreset>> = 
    dataStore.data.map { preferences ->
        Json.decodeFromString(preferences[SAVED_PRESETS] ?: "")
    }
```

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

### è®¡æ—¶ç²¾åº¦
- **ç›®æ ‡ç²¾åº¦**: Â±5ms
- **å®é™…ç²¾åº¦**: Â±2msï¼ˆCoroutines delayï¼‰
- **ç´¯ç§¯è¯¯å·®**: å¯å¿½ç•¥ï¼ˆæ¯æ¬¡é‡æ–°è®¡ç®—ï¼‰

### èµ„æºä½¿ç”¨
- **å†…å­˜å ç”¨**: ~10MBï¼ˆåŒ…å«éŸ³æ•ˆï¼‰
- **CPU ä½¿ç”¨**: <5%ï¼ˆæ’­æ”¾æ—¶ï¼‰
- **ç”µæ± æ¶ˆè€—**: ä½ï¼ˆä¼˜åŒ–çš„è®¡æ—¶å¾ªç¯ï¼‰

### å“åº”é€Ÿåº¦
- **UI å“åº”**: <16msï¼ˆ60fpsï¼‰
- **éŸ³æ•ˆå»¶è¿Ÿ**: ~50msï¼ˆç³»ç»Ÿé™åˆ¶ï¼‰
- **è§¦è§‰å»¶è¿Ÿ**: <10ms

## ğŸ¨ è®¾è®¡äº®ç‚¹

### Material 3 è®¾è®¡
- **åŠ¨æ€ä¸»é¢˜è‰²** - è·Ÿéšç³»ç»Ÿä¸»é¢˜
- **å¡ç‰‡å¼å¸ƒå±€** - æ¸…æ™°çš„è§†è§‰å±‚æ¬¡
- **åœ†è§’è®¾è®¡** - ç°ä»£æ„Ÿ
- **é˜´å½±æ•ˆæœ** - æ·±åº¦æ„Ÿ

### åŠ¨ç”»æ•ˆæœ
- **è„‰å†²åŠ¨ç”»** - èŠ‚æ‹å¾‹åŠ¨æ„Ÿ
- **è¿›åº¦ç¯** - å®æ—¶è¿›åº¦åé¦ˆ
- **èŠ‚æ‹ç‚¹** - ä½ç½®æŒ‡ç¤º
- **çŠ¶æ€åˆ‡æ¢** - å¹³æ»‘è¿‡æ¸¡

### äº¤äº’è®¾è®¡
- **å¤§æŒ‰é’®** - æ˜“äºç‚¹å‡»
- **å³æ—¶åé¦ˆ** - è§¦è§‰ + è§†è§‰
- **æ¸…æ™°æ ‡ç­¾** - æ˜“äºç†è§£
- **åˆç†å¸ƒå±€** - ç¬¦åˆä½¿ç”¨ä¹ æƒ¯

## ğŸ’¾ æ•°æ®æŒä¹…åŒ–

### è‡ªåŠ¨ä¿å­˜
- **æœ€å BPM** - åº”ç”¨å…³é—­æ—¶ä¿å­˜
- **æœ€åæ‹å·** - è‡ªåŠ¨è®°å½•
- **éŸ³é‡è®¾ç½®** - ä¿æŒä¸€è‡´
- **å¼€å…³çŠ¶æ€** - è®°ä½åå¥½

### é¢„è®¾ç³»ç»Ÿ
- **æ— é™é¢„è®¾** - ç†è®ºä¸Šæ— é™åˆ¶
- **å¿«é€ŸåŠ è½½** - ä¸€é”®åº”ç”¨
- **æ˜“äºç®¡ç†** - åˆ é™¤ç®€å•
- **æŒä¹…å­˜å‚¨** - DataStore å¯é 

## ğŸ” æƒé™éœ€æ±‚

### å¿…éœ€æƒé™
- `VIBRATE` - è§¦è§‰åé¦ˆï¼ˆå·²é…ç½®ï¼‰

### å¯é€‰æƒé™
- æ— 

## ğŸ“± å…¼å®¹æ€§

### Android ç‰ˆæœ¬
- **æœ€ä½ç‰ˆæœ¬**: Android 8.0 (API 26)
- **ç›®æ ‡ç‰ˆæœ¬**: Android 14 (API 34)
- **æµ‹è¯•ç‰ˆæœ¬**: å¾…æµ‹è¯•

### è®¾å¤‡æ”¯æŒ
- **æ‰‹æœº** - å®Œå…¨æ”¯æŒ
- **å¹³æ¿** - å“åº”å¼å¸ƒå±€
- **æŠ˜å å±** - è‡ªé€‚åº”

## ğŸ“ ä»£ç è´¨é‡

### æ¶æ„æ¨¡å¼
- âœ… MVVM æ¶æ„
- âœ… å•ä¸€èŒè´£åŸåˆ™
- âœ… ä¾èµ–æ³¨å…¥ï¼ˆHiltï¼‰
- âœ… å“åº”å¼ç¼–ç¨‹ï¼ˆFlowï¼‰

### ä»£ç è§„èŒƒ
- âœ… Kotlin é£æ ¼æŒ‡å—
- âœ… å‘½åè§„èŒƒ
- âœ… æ³¨é‡Šå®Œæ•´
- âœ… æ— è­¦å‘Š

### å¯ç»´æŠ¤æ€§
- âœ… æ¨¡å—åŒ–è®¾è®¡
- âœ… æ¸…æ™°çš„æ–‡ä»¶ç»“æ„
- âœ… æ˜“äºæ‰©å±•
- âœ… æ–‡æ¡£å®Œå–„

## ğŸ“š æ–‡æ¡£

### ç”¨æˆ·æ–‡æ¡£
- âœ… `metronome-guide.md` - ä½¿ç”¨æŒ‡å—
- âœ… åŠŸèƒ½è¯´æ˜
- âœ… æ“ä½œæŠ€å·§
- âœ… å¸¸è§é—®é¢˜

### æŠ€æœ¯æ–‡æ¡£
- âœ… `metronome-completion-summary.md` - æŠ€æœ¯æ€»ç»“
- âœ… `metronome-final-summary.md` - æœ€ç»ˆæ€»ç»“
- âœ… æ¶æ„è¯´æ˜
- âœ… å®ç°ç»†èŠ‚

## ğŸš€ æœªæ¥å±•æœ›

### çŸ­æœŸè®¡åˆ’ï¼ˆ1-2 å‘¨ï¼‰
1. æ·»åŠ è‡ªå®šä¹‰éŸ³æ•ˆèµ„æº
2. ä¼˜åŒ–éŸ³æ•ˆå»¶è¿Ÿ
3. æ·»åŠ æ›´å¤šæ‹å·é€‰é¡¹
4. é¢„è®¾å¯¼å…¥/å¯¼å‡º

### ä¸­æœŸè®¡åˆ’ï¼ˆ1-2 æœˆï¼‰
1. åå°æ’­æ”¾æ”¯æŒ
2. é€šçŸ¥æ æ§åˆ¶
3. èŠ‚æ‹æ¨¡å¼ï¼ˆå¤æ‚èŠ‚å¥ï¼‰
4. å½•åˆ¶åŠŸèƒ½

### é•¿æœŸè®¡åˆ’ï¼ˆ3-6 æœˆï¼‰
1. ä¸ç•ªèŒ„é’Ÿé›†æˆ
2. ç»ƒä¹ ç»Ÿè®¡
3. äº‘åŒæ­¥é¢„è®¾
4. ç¤¾åŒºé¢„è®¾åˆ†äº«

## ğŸ‰ æ€»ç»“

èŠ‚æ‹å™¨åŠŸèƒ½ç°å·²å®Œå…¨å®ç°å¹¶å®Œå–„ï¼Œå…·å¤‡ï¼š

### åŠŸèƒ½å®Œæ•´æ€§ â­â­â­â­â­
- æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½å·²å®ç°
- é¢„è®¾ç®¡ç†ç³»ç»Ÿå®Œå–„
- è‡ªåŠ¨ä¿å­˜åŠŸèƒ½å¯é 

### ç”¨æˆ·ä½“éªŒ â­â­â­â­â­
- ç•Œé¢ç¾è§‚ç°ä»£
- äº¤äº’æµç•…ç›´è§‚
- åé¦ˆåŠæ—¶å‡†ç¡®

### æŠ€æœ¯è´¨é‡ â­â­â­â­â­
- æ¶æ„æ¸…æ™°åˆç†
- ä»£ç è§„èŒƒæ•´æ´
- æ€§èƒ½ä¼˜ç§€ç¨³å®š

### æ–‡æ¡£å®Œå–„åº¦ â­â­â­â­â­
- ç”¨æˆ·æŒ‡å—è¯¦ç»†
- æŠ€æœ¯æ–‡æ¡£å®Œæ•´
- æ³¨é‡Šæ¸…æ™°å‡†ç¡®

**è¿™æ˜¯ä¸€ä¸ªå¯ä»¥æŠ•å…¥ç”Ÿäº§ä½¿ç”¨çš„ä¸“ä¸šçº§èŠ‚æ‹å™¨å·¥å…·ï¼** ğŸ¼âœ¨

---

**å¼€å‘è€…**: Kiro AI  
**ç‰ˆæœ¬**: 1.0  
**æœ€åæ›´æ–°**: 2024-01-20
