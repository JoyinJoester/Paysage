```kotlin
// 最终版 AI 提示词（已修正：软件名 Saison，无中文名，全部 M3E + 多语言 + WebDAV + 番茄钟 + 节拍器）
```

```
你是一个 **Android 顶级架构师 + Jetpack Compose M3E 专家 + 任务管理产品大师**，精通 MVVM、Room、Kotlin Flow、Hilt、Navigation Compose、Material 3 Extended、WebDAV 同步、Pomodoro 算法、节拍器音频引擎、Android 15 动态取色与折叠屏适配、多语言本地化。

请基于 **Monica Password Manager 的完整架构文档（已提供）**，为我 **全新设计并生成一个生产级、极致好用、用户用完就说“终于有人做对了”的任务管理神器 —— Saison**。

---

## 项目核心信息（严格遵守）

| 项目 | 内容 |
|------|------|
| **App 名称** | `Saison`（**无中文名**，仅使用英文/法语拼写） |
| **包名** | `takagi.ru.saison` |
| **最低 SDK** | Android 10 (API 29) |
| **目标 SDK** | Android 15 (API 35) |
| **语言** | Kotlin 1.9.24+ |
| **UI 框架** | **Jetpack Compose + Material 3 Extended（M3E）** |
| **许可证** | GPL-3.0 |

> **Saison** 意为“季节”，象征任务与生活的节奏感。**不翻译为“四季”**，所有 UI、文档、代码中均使用 `Saison`。

---

## 设计语言：**M3E（Material 3 Extended）全栈**

- **动态颜色**：Android 12+ 壁纸取色 + **12 季主题调色盘**（Sakura, Mint, Amber, Snow, Rain, Maple…）
- **M3E 组件**：`ExtendedFloatingActionButton`、`SegmentedButton`、`RichTooltip`、`SearchBar`、`DatePicker`、`ModalBottomSheet`、`NavigationRail`、`NavigationBar`
- **微交互**：涟漪 + 缩放 + `HapticFeedbackConstants.EMPHASIZE`
- **响应式**：`WindowSizeClass` 适配 手机 / 平板 / 折叠屏 / 桌面模式
- **无障碍**：TalkBack、动态文本、高对比、语义标签

---

## 架构（复用 Monica 成熟结构，任务场景深度优化）

```
UI Layer (Compose M3E)
    ↓
ViewModel Layer (StateFlow + SavedStateHandle)
    ↓
Repository Layer (业务逻辑 + 数据协调)
    ↓
Data Layer
    ├─ Room DB (Task, Course, Tag, Pomodoro, Metronome)
    ├─ DataStore (Settings + Theme + Sync)
    ├─ EncryptedFile (附件)
    └─ SoundPool / MediaSession (节拍器)
```

---

## 核心功能模块（全部 M3E 设计 + 多语言）

### 1. **Calendar Views**
- Month / Week / Day / Agenda（滑动切换）
- **Lunar Calendar + Solar Terms + Holidays**（China / Japan / Vietnam）
- Drag to resize events
- Color dots for task types

### 2. **Course Schedule**
- Weekly cycle + A/B week + Single/Double week
- Course cards with color chips
- **OCR Import** (ML Kit Text Recognition v2)
- 10-min pre-class notification + auto silent

### 3. **Todo & Subtasks**
- **Natural Language Input**  
  `"tomorrow 9am meeting prepare slides"` → auto parse
- Subtasks + Checklist + **Recurring**
- **Eisenhower Matrix** (`SegmentedButton`)

### 4. **Pomodoro Timer（M3E 风格）**
- 25/5 default + custom
- **Circular Progress** with countdown text
- Long break every 4 sessions
- **Focus Mode** (lock screen + DND)
- Weekly stats (Canvas chart)

### 5. **Metronome（节拍器）**
- BPM: 30–240
- **Sound options**: Woodblock / Click / Beep (`SoundPool`)
- **Visual beat**: Flashing `ElevatedCard` + vibration
- Subdivisions: 1/4, 1/8, Triplets
- **Background + Lock Screen Control** (`MediaSession`)

### 6. **WebDAV Sync**
- Nutstore / Nextcloud / ownCloud
- **Incremental sync** (ETag + Last-Modified)
- **Conflict resolution** (timestamp + user choice)
- Auto backup at 3:00 AM (`WorkManager`)

### 7. **Tags & Categories**
- Hierarchical: `#study/university/math`
- Icons from `MaterialIcons.Extended`
- Smart suggestions

### 8. **Attachments**
- Image, PDF, Voice Memo, Handwritten Note
- **AES-256-GCM + Keystore**
- Preview + offline cache

### 9. **Widgets**
- Today Tasks (4×2)
- Course Schedule (4×4, transparent)
- Pomodoro Countdown (2×2)

### 10. **Security**
- 6-digit PIN + Biometric
- Sensitive task encryption
- Screenshot protection + 3-min auto lock
- Pwned check (task title)

---

## 数据库设计（Room）

```kotlin
@Entity(tableName = "tasks")
data class Task(
    @PrimaryKey(autoGenerate = true) val id: Long = 0,
    val title: String,
    val description: String?,
    val dueDate: Long?,
    val reminderTime: Long?,
    val location: String?,
    val priority: Int, // 0-3
    val isCompleted: Boolean = false,
    val categoryId: Long,
    val repeatRule: String?, // RRULE
    val pomodoroCount: Int = 0,
    val metronomeBpm: Int? = null
)

@Entity(tableName = "pomodoro_sessions")
data class PomodoroSession(
    @PrimaryKey(autoGenerate = true) val id: Long = 0,
    val taskId: Long?,
    val startTime: Long,
    val duration: Int,
    val isCompleted: Boolean
)
```

---

## 多语言支持（无中文名）

```xml
<!-- values/strings.xml -->
<string name="app_name">Saison</string>
<string name="pomodoro_start">Start Focus</string>
<string name="metronome_bpm">BPM</string>
<string name="sync_webdav">WebDAV Sync</string>

<!-- values-zh-rCN/strings.xml -->
<string name="app_name">Saison</string>
<string name="pomodoro_start">开始专注</string>
<string name="metronome_bpm">节拍</string>
<string name="sync_webdav">WebDAV 同步</string>

<!-- values-ja/strings.xml -->
<string name="app_name">Saison</string>
<string name="pomodoro_start">集中開始</string>
```

- 动态切换：`LocaleHelper.applyLocale(context, locale)`
- 日期本地化：`DateFormat.getBestDateTimePattern`

---

## 输出要求（Markdown，代码可运行）

1. **`build.gradle.kts` 完整依赖**  
   （M3E、WebDAV、SoundPool、WorkManager、ML Kit、Charts）
2. **模块目录结构**
3. **主界面 Compose 框架**  
   （`NavigationBar` + `ModalNavigationDrawer` + `SearchBar`）
4. **`TaskRepository` + `TaskDao` 示例**
5. **动态主题 + M3E 切换**（`DataStore` + `dynamicColor`）
6. **Pomodoro ViewModel + UI**
7. **Metronome Service + Compose UI**
8. **WebDAV Sync Repository**
9. **Natural Language Parser 伪代码**

---

## 约束

- **所有 UI 必须使用 M3E 组件**
- **所有字符串支持多语言（`strings.xml`）**
- **所有异步使用 Flow + Coroutines**
- **所有加密使用 Security Crypto**
- **完全兼容 Android 15**（Predictive Back、Edge-to-Edge、Per-App Language）

---

**输出即生产级工程，可直接导入 Android Studio 运行**
```

---

**使用方式**：  
复制以上 **整个提示词**，粘贴至 **Claude 3.5 / GPT-4o / Cursor / Qwen-Max**，即可生成：

- 登录 → 主页 → 日历 → 番茄钟 → 节拍器 → WebDAV 同步  
- M3E 丝滑动画 + 12 季主题  
- 英文 / 中文 / 日文 / 越南语无缝切换  
- **Saison** 品牌统一，**无“四季”字样**

---

**Saison = Calendar + Schedule + Todo + Pomodoro + Metronome + WebDAV + M3E + Love at First Use**  
不是“能用”，是“用完不想换”。